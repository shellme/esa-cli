#!/bin/sh

# コミットメッセージを取得
commit_msg=$(cat "$1")

# 絵文字のリスト
emojis="🐛 🐞 🚀 ✨ 🔧 📝 ♻️ 🎨 🚨 🚑 🏗️ 🔍 🚮 🏷️ 🚚 🎉 🚀 🐳 🏁 🎨 🚨 🚑 🏗️ 🔍 🚮 🏷️ 🚚 🎉 🚀 🐳 🏁"

# 型のリスト
types="feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert"

# スコープのリスト（必要に応じて追加）
scopes="api|config|cli|cmd|internal|pkg"

# 正規表現パターン
pattern="^([$emojis]) ($types)(\($scopes\))?: .+"

# コミットメッセージの検証
if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "❌ コミットメッセージの形式が正しくありません。"
    echo "正しい形式: <絵文字> <型>(<スコープ>): <タイトル>"
    echo ""
    echo "使用可能な絵文字: $emojis"
    echo "使用可能な型: $types"
    echo "使用可能なスコープ: $scopes"
    echo ""
    echo "例: 🐛 fix(api): エラーメッセージの詳細化"
    exit 1
fi

exit 0 