#!/bin/sh

# コミットメッセージを取得
commit_msg=$(cat "$1")

# 型のリスト
types="feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert"

# 正規表現パターン（スペースを考慮）
pattern="^([🐛🐞🚀✨🔧📝♻️🎨🧪🚨🚑🏗️🔍🚮🏷️🚚🎉🚀🐳🏁📦]) ($types)(\([a-z0-9-]+\))?: .+"

# コミットメッセージの検証
if ! echo "$commit_msg" | grep -qE "$pattern"; then
    echo "❌ コミットメッセージの形式が正しくありません。"
    echo "正しい形式: <絵文字> <型>(<スコープ>): <タイトル>"
    echo ""
    echo "使用可能な型: $types"
    echo "スコープは任意です（省略可）。使用する場合は小文字の英数字とハイフンのみ使用可能です。"
    echo ""
    echo "例: 🐛 fix(api): エラーメッセージの詳細化"
    echo "例: 📝 docs: READMEの更新"
    exit 1
fi

exit 0 