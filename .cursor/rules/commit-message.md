# Commit Message Convention

コミットメッセージの形式を定義します。

## ルール

コミットメッセージは以下の形式に従ってください：

```
<絵文字> <型>(<スコープ>): <タイトル>

<本文>  # 必要な場合のみ
```

### 言語

- コミットメッセージは日本語で記述してください
- タイトルは簡潔に、本文は必要に応じて詳細を記述してください

### 使用可能な絵文字と型の組み合わせ

| 型 | 絵文字 | 説明 | 例 |
|----|-----|---|-----|
| feat | ✨ | 新機能の追加 | ✨ feat(cli): 新しいコマンドを追加 |
| fix | 🐛 | バグ修正 | 🐛 fix(api): エラーメッセージの詳細化 |
| docs | 📝 | ドキュメントの更新 | 📝 docs: READMEの更新 |
| style | 🎨 | コードスタイルの修正 | 🎨 style: インデントの修正 |
| refactor | ♻️ | リファクタリング | ♻️ refactor(internal): コードの整理 |
| perf | 🚀 | パフォーマンス改善 | 🚀 perf(api): レスポンス時間の改善 |
| test | 🧪 | テストの追加・修正 | 🧪 test: ユニットテストの追加 |
| build | 🏗️ | ビルド関連の変更 | 🏗️ build: 依存関係の更新 |
| ci | 🔧 | CI設定の変更 | 🔧 ci: GitHub Actionsの設定更新 |
| chore | 📦 | その他の変更 | 📦 chore: パッケージの更新 |
| revert | ⏪ | 変更の取り消し | ⏪ revert: 前回の変更を取り消し |

### 使用可能なスコープ

- api: API関連
- config: 設定関連
- cli: CLI関連
- cmd: コマンド関連
- internal: 内部実装
- pkg: パッケージ

## コミットメッセージの書き方

### 1. シンプルな1行のコミット

変更内容が明確で、追加の説明が不要な場合は1行でコミットします：

```bash
git commit -m "🔧 fix(build): macOS用バイナリのビルド設定を修正"
```

### 2. 詳細な説明が必要な場合

変更の理由や背景、影響範囲などの詳細な説明が必要な場合は、ヒアドキュメントを使用します：

```bash
git commit -F- << EOM
<絵文字> <型>(<スコープ>): <タイトル>

<本文>
EOM
```

### 本文の書き方

本文は以下の点に注意して記述してください：

- 変更の理由や背景を説明する
- 変更による影響範囲を明記する
- 関連するIssue番号がある場合は参照する
- 破壊的な変更の場合は、その旨を明記する

## 例

### 1. シンプルな1行のコミット

```bash
# バグ修正
git commit -m "🐛 fix(api): エラーメッセージの詳細化"

# 新機能
git commit -m "✨ feat(cli): 新しいコマンドを追加"

# ドキュメント
git commit -m "📝 docs: READMEの更新"

# リファクタリング
git commit -m "♻️ refactor(internal): コードの整理"
```

### 2. 詳細な説明が必要な場合

```bash
# バグ修正
git commit -F- << EOM
🐛 fix(api): エラーメッセージの詳細化

エラーメッセージが不十分だったため、より詳細な情報を追加。
- エラーの原因を特定しやすくするため
- デバッグ時の情報収集を効率化するため
EOM

# 新機能
git commit -F- << EOM
✨ feat(cli): 新しいコマンドを追加

新しいコマンド `esa-cli post` を追加。
- 記事の作成と更新をサポート
- マークダウン形式のファイルを直接投稿可能
- プレビュー機能を実装
EOM

# ドキュメント
git commit -F- << EOM
📝 docs: READMEの更新

インストール手順と基本的な使い方を追加。
- 各OSでのインストール方法を記載
- よく使うコマンドの例を追加
- トラブルシューティングセクションを追加
EOM

# リファクタリング
git commit -F- << EOM
♻️ refactor(internal): コードの整理

内部実装のリファクタリングを実施。
- 重複コードの削除
- 関数の責務を明確化
- テストカバレッジの向上
EOM
```

## 正規表現パターン

```regex
^([🐛🐞🚀✨🔧📝♻️🎨🚨🚑🏗️🔍🚮🏷️🚚🎉🚀🐳🏁]) (feat|fix|docs|style|refactor|perf|test|build|ci|chore|revert)(\(api|config|cli|cmd|internal|pkg\))?: .+
``` 