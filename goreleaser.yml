project_name: esa-cli

builds:
  - main: ./cmd/esa-cli
    goos:
      - darwin
      - linux
    goarch:
      - amd64
      - arm64
    ldflags: -s -w -X main.version={{.Version}}

archives:
  - id: default
    format: tar.gz
    files:
      - LICENSE

checksum:
  name_template: "checksums.txt"

brews:
  - name: esa-cli
    repository:
      owner: shellme
      name: homebrew-esa-cli
      branch: main
      token: "{{ .Env.HOMEBREW_TAP_GITHUB_TOKEN }}"
    folder: Formula
    commit_author:
      name: goreleaserbot
      email: goreleaser@users.noreply.github.com
    homepage: "https://github.com/shellme/esa-cli"
    description: "CLI tool for managing esa.io articles"
    license: "MIT"
    url_template: "https://github.com/shellme/esa-cli/releases/download/v{{ .Version }}/esa-cli_{{ .Version }}_darwin_arm64.tar.gz"
    test: |
      system "#{bin}/esa-cli", "version"
    install: |
      bin.install "esa-cli"

release:
  github:
    owner: shellme
    name: esa-cli

changelog:
  sort: desc
  filters:
    exclude:
      - '^docs:'
      - '^test:' 