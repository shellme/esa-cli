---
title: ãƒªãƒªãƒ¼ã‚¹æ‰‹é †
description: esa-cliã®ãƒªãƒªãƒ¼ã‚¹æ‰‹é †ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™
---
import { Steps } from '@astrojs/starlight/components';

esa-cliã®ãƒªãƒªãƒ¼ã‚¹ã¯ã€ä»¥ä¸‹ã®æ‰‹é †ã§æ­£ç¢ºã«è¡Œã„ã¾ã™ã€‚

## 1. ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ›´æ–°ã¨ãƒ“ãƒ«ãƒ‰

<Steps>
1. **ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã®æ›´æ–°**

    `internal/version/version.go` ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·ã‚’æ›´æ–°ã—ã¾ã™ã€‚

    ```go
    // internal/version/version.go
    const Version = "x.y.z"  // æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç•ªå·
    ```

2. **å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ**

    ```bash
    git add internal/version/version.go
    git commit -m "build: Bump version to x.y.z"
    ```

3. **ãƒªãƒªãƒ¼ã‚¹ç”¨ãƒã‚¤ãƒŠãƒªã®ãƒ“ãƒ«ãƒ‰**

    `make release` ã‚’å®Ÿè¡Œã—ã¦ã€Macç”¨ã®ãƒ¦ãƒ‹ãƒãƒ¼ã‚µãƒ«ãƒã‚¤ãƒŠãƒªã¨ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã‚’ä½œæˆã—ã¾ã™ã€‚

    ```bash
    make release
    ```

4. **SHA256ã®è¨ˆç®—**

    ä½œæˆã•ã‚ŒãŸã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã®SHA256ãƒãƒƒã‚·ãƒ¥å€¤ã‚’è¨ˆç®—ã—ã¾ã™ã€‚ã“ã®å€¤ã¯å¾Œã§ä½¿ã„ã¾ã™ã€‚

    ```bash
    shasum -a 256 esa-cli-darwin-universal.tar.gz
    ```

5. **Homebrew Formulaã®æ›´æ–°**

    `Formula/esa-cli.rb` ã‚’é–‹ãã€`version` ã¨ `sha256` ã®å€¤ã‚’æ›´æ–°ã—ã¾ã™ã€‚

    ```ruby
    # Formula/esa-cli.rb
    class EsaCli < Formula
      # ...
      version "x.y.z"
      sha256 "å…ˆã»ã©è¨ˆç®—ã—ãŸãƒãƒƒã‚·ãƒ¥å€¤"
      # ...
      def install
        # ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…ã®ãƒã‚¤ãƒŠãƒªåãŒ 'esa-cli' ã§ãªã„å ´åˆã€
        # `bin.install "å®Ÿéš›ã®åå‰" => "esa-cli"` ã®ã‚ˆã†ã«æŒ‡å®š
        bin.install "esa-cli-darwin-universal" => "esa-cli"
      end
      # ...
    end
    ```

    **ğŸš¨ æ³¨æ„:** `bin.install` ã®è¨­å®šãŒæ­£ã—ããªã„ã¨ã€`No such file or directory` ã‚¨ãƒ©ãƒ¼ã®åŸå› ã«ãªã‚Šã¾ã™ã€‚

6. **Formulaã®å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆ**

    ```bash
    git add Formula/esa-cli.rb
    git commit -m "build: Update Homebrew formula for vX.Y.Z"
    ```

</Steps>

## 2. GitHubã§ã®ãƒªãƒªãƒ¼ã‚¹ä½œæ¥­

<Steps>

1. **ã‚¿ã‚°ã®ä½œæˆã¨ãƒ—ãƒƒã‚·ãƒ¥**

    ```bash
    git tag -a vX.Y.Z -m "Release vX.Y.Z"
    git push origin main --follow-tags
    ```

2. **GitHubãƒªãƒªãƒ¼ã‚¹ã‚’ä½œæˆ**
    -   [ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸](https://github.com/shellme/esa-cli/releases)ã«ç§»å‹•ã—ã€ã€ŒDraft a new releaseã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚
    -   ä½œæˆã—ãŸã‚¿ã‚°ï¼ˆ`vX.Y.Z`ï¼‰ã‚’é¸æŠã—ã¾ã™ã€‚
    -   ãƒªãƒªãƒ¼ã‚¹ã‚¿ã‚¤ãƒˆãƒ«ã¨ãƒªãƒªãƒ¼ã‚¹ãƒãƒ¼ãƒˆï¼ˆå¤‰æ›´å±¥æ­´ãªã©ï¼‰ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

3. **ãƒã‚¤ãƒŠãƒªã®æ‰‹å‹•ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**
    -   **ğŸš¨ æœ€é‡è¦:** `make release` ã§ä½œæˆã—ãŸ `esa-cli-darwin-universal.tar.gz` ã‚’ã€Assetsæ¬„ã«ãƒ‰ãƒ©ãƒƒã‚°ï¼†ãƒ‰ãƒ­ãƒƒãƒ—ã—ã¦**æ‰‹å‹•ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**ã—ã¾ã™ã€‚
    -   GitHubãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ `Source code (zip/tar.gz)` ã ã‘ã§ã¯ã€Homebrewã¯ãƒã‚¤ãƒŠãƒªã‚’è¦‹ã¤ã‘ã‚‰ã‚Œã¾ã›ã‚“ã€‚

4. **ãƒªãƒªãƒ¼ã‚¹ã‚’å…¬é–‹**
    -   ã€ŒPublish releaseã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ãƒªãƒªãƒ¼ã‚¹ã‚’å…¬é–‹ã—ã¾ã™ã€‚

</Steps>

## 3. Homebrew tapãƒªãƒã‚¸ãƒˆãƒªã®æ›´æ–°

<Steps>

1. **homebrew-esa-cliãƒªãƒã‚¸ãƒˆãƒªã«ç§»å‹•**

    ```bash
    # ä¾‹
    cd ../homebrew-esa-cli
    ```

2. **æœ€æ–°ã®Formulaãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼**

    `esa-cli` æœ¬ä½“ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰ã€æ›´æ–°ã—ãŸ `esa-cli.rb` ã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ä¸Šæ›¸ãã—ã¾ã™ã€‚

    ```bash
    cp ../esa-cli/Formula/esa-cli.rb Formula/esa-cli.rb
    ```

3. **å¤‰æ›´ã‚’ã‚³ãƒŸãƒƒãƒˆã—ã¦ãƒ—ãƒƒã‚·ãƒ¥**

    ```bash
    git add Formula/esa-cli.rb
    git commit -m "Update esa-cli to vX.Y.Z"
    git push origin main
    ```

</Steps>

## 4. ãƒªãƒªãƒ¼ã‚¹å¾Œã®ç¢ºèªã¨ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

ãƒªãƒªãƒ¼ã‚¹ãŒå®Œäº†ã—ãŸã‚‰ã€Homebrewã§æ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã‚‹ã‹ç¢ºèªã—ã¾ã™ã€‚

```bash
brew update
brew upgrade esa-cli
# ã¾ãŸã¯å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew reinstall esa-cli
```

## ã‚ˆãã‚ã‚‹å•é¡Œã¨è§£æ±ºç­–

**ã‚¨ãƒ©ãƒ¼: `Failed to download resource "esa-cli"` (404 Not Found)**
    -   **åŸå› **: GitHubãƒªãƒªãƒ¼ã‚¹ã®Assetsã«ãƒã‚¤ãƒŠãƒª (`.tar.gz`) ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚
    -   **è§£æ±ºç­–**: ãƒªãƒªãƒ¼ã‚¹ãƒšãƒ¼ã‚¸ã‚’ç·¨é›†ã—ã€ãƒã‚¤ãƒŠãƒªã‚’**æ‰‹å‹•ã§ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**ã—ã¦ãã ã•ã„ã€‚

**ã‚¨ãƒ©ãƒ¼: `No such file or directory - esa-cli`**
    -   **åŸå› **: Formulaå†…ã® `bin.install` ã§æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«åãŒã€ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å†…ã®ãƒã‚¤ãƒŠãƒªåã¨ä¸€è‡´ã—ã¦ã„ã¾ã›ã‚“ã€‚
    -   **è§£æ±ºç­–**: `Formula/esa-cli.rb` ã® `bin.install` ã®è¨˜è¿°ã‚’ `bin.install "å®Ÿéš›ã®åå‰" => "esa-cli"` ã®ã‚ˆã†ã«ä¿®æ­£ã—ã€ä¸¡æ–¹ã®ãƒªãƒã‚¸ãƒˆãƒªã‚’æ›´æ–°ã—ã¦ãã ã•ã„ã€‚

**ã‚¨ãƒ©ãƒ¼: `Will not overwrite ... config.template`**
    -   **åŸå› **: æ—¢å­˜ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ãŒåŸå› ã§HomebrewãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’ä¸­æ–­ã—ã¦ã„ã¾ã™ã€‚
    -   **è§£æ±ºç­–**: ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§æ—¢å­˜ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã—ã€å†åº¦ `reinstall` ã‚’è©¦ã—ã¦ãã ã•ã„ã€‚
        ```bash
        rm /opt/homebrew/etc/esa-cli/config.template
        brew reinstall esa-cli
        ```
**å¤ã„FormulaãŒå‚ç…§ã•ã‚Œã¦ã—ã¾ã†å ´åˆ**
    -   **åŸå› **: Homebrewã®ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãŒå¤ã„æƒ…å ±ã‚’ä¿æŒã—ã¦ã„ã¾ã™ã€‚
    -   **è§£æ±ºç­–**: ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰ã€å†åº¦è©¦ã—ã¦ãã ã•ã„ã€‚
        ```bash
        rm $(brew --cache)/esa-cli--*.tar.gz
        ```