---
title: "開発者ガイド"
description: "esa-cliの開発者向けガイド"
---

esa-cliの開発に参加するためのガイドです。

## プロジェクトの構造

```
esa-cli/
├── src/
│   ├── commands/     # コマンドの実装
│   ├── config/       # 設定関連
│   ├── models/       # データモデル
│   ├── services/     # 外部サービスとの連携
│   └── utils/        # ユーティリティ関数
├── tests/            # テストコード
├── scripts/          # ビルドスクリプトなど
└── docs/             # ドキュメント
```

## 開発環境のセットアップ

1. リポジトリのクローン
```bash
git clone https://github.com/shellme/esa-cli.git
cd esa-cli
```

2. 依存関係のインストール
```bash
npm install
```

3. 開発用ビルド
```bash
npm run build
```

4. テストの実行
```bash
npm test
```

## テストの書き方

esa-cliでは、Jestを使用してテストを書いています。

### テストの基本構造

```typescript
describe('コマンド名', () => {
  it('テストケースの説明', async () => {
    // テストコード
  });
});
```

### モックの使用例

```typescript
jest.mock('../../services/esa');

describe('fetch command', () => {
  it('should fetch article', async () => {
    // モックの設定
    mockEsaService.fetchArticle.mockResolvedValue({
      id: 123,
      title: 'Test Article',
      body_md: '# Test'
    });

    // テストの実行
    await fetchCommand(123);

    // アサーション
    expect(mockEsaService.fetchArticle).toHaveBeenCalledWith(123);
  });
});
```

## コントリビューションガイド

1. 新しい機能やバグ修正のIssueを作成
2. 新しいブランチを作成（`feature/機能名` または `fix/バグ名`）
3. 変更を実装
4. テストを追加・実行
5. プルリクエストを作成

### コーディング規約

- TypeScriptの型定義を適切に使用
- エラーハンドリングを適切に実装
- テストカバレッジを維持
- ドキュメントの更新

## リリースプロセス

1. バージョン番号の更新（`package.json`）
2. CHANGELOGの更新
3. タグの作成とプッシュ
4. GitHubリリースの作成

### バージョニング

- メジャーバージョン: 後方互換性のない変更
- マイナーバージョン: 後方互換性のある機能追加
- パッチバージョン: バグ修正

## トラブルシューティング

### よくある問題

1. ビルドエラー
   - `npm run clean` を実行してから再ビルド
   - TypeScriptの型エラーを確認

2. テストの失敗
   - モックの設定を確認
   - テスト環境の変数を確認

3. 依存関係の問題
   - `package-lock.json` を削除して `npm install` を再実行 