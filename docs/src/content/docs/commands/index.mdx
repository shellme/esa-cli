---
title: "コマンドリファレンス"
description: "esa-cliのコマンドと設定の詳細な仕様"
---

esa-cliのコマンドと設定の詳細な仕様です。実践的な使用例については「ユーザーガイド」や「基本的な使い方」を参照してください。

## コマンド一覧

### `esa-cli setup`

初期設定を行います。

```bash
esa-cli setup
```

#### オプション
- `-team` - チーム名を指定
- `-token` - アクセストークンを指定

#### 設定ファイルの生成
このコマンドは `~/.esa-cli-config.json` に設定ファイルを生成します。

### `esa-cli list`

記事一覧を表示します。

```bash
esa-cli list [count]
```

#### オプション
- `count` - 表示する記事数（デフォルト: 10）
- `-c, --category` - カテゴリでフィルタ（例: "開発/ドキュメント"）
- `-t, --tag` - タグでフィルタ（例: "API"）
- `-q, --query` - 検索キーワード
- `-u, --user` - 作成者でフィルタ（例: "自分のユーザー名"）

#### 出力形式
記事は以下の形式で表示されます：
```
[記事番号] タイトル
カテゴリ: カテゴリ名
タグ: タグ1, タグ2
更新日時: YYYY-MM-DD HH:MM:SS
```

### `esa-cli fetch`

記事をダウンロードします。

```bash
esa-cli fetch <article_number>
```

#### オプション
- `-c, --category` - カテゴリでフィルタ
- `-t, --tag` - タグでフィルタ
- `-q, --query` - 検索ワードでフィルタ
- `-u, --user` - 作成者でフィルタ
- `-l, --latest` - 最新の記事をダウンロード

#### ファイル形式
記事はMarkdown形式で保存され、以下の命名規則に従います：
```
<article_number>-<article-title>.md
```

#### ファイル構造
```markdown
---
title: 記事のタイトル
category: カテゴリ
tags: [tag1, tag2]
wip: false
remote_updated_at: "2025-06-21T09:32:41+09:00"
---

記事の本文...
```

### `esa-cli update`

記事を更新します。

```bash
esa-cli update <file_path>
```

#### オプション
- `-m, --message` - 更新メッセージ（変更履歴に表示）
- `-n, --no-wip` - WIP状態を解除
- `-c, --category` - カテゴリを変更
- `-a, --add-tags` - タグを追加（カンマ区切り）
- `-r, --remove-tags` - タグを削除（カンマ区切り）

#### ファイル名の規則
更新対象のファイル名は以下の形式である必要があります：
```
<article_number>-<article-title>.md
```

#### リモート変更チェック
ローカルで編集を開始した後にリモート記事が更新された場合、上書き前に警告を表示します。チーム作業での競合を防ぐことができます。

**警告例：**
```
⚠️  警告: リモートの記事はローカルで編集を始めてから更新されています。
  リモート: 2025-06-22 14:01:45
  ローカル: 2025-06-21 09:32:41
このまま上書きしますか？ (y/N):
```

### `esa-cli move`

記事を一括でカテゴリ移動します。

```bash
esa-cli move
```

#### オプション
- `-c, --category` - 移動元のカテゴリ
- `-u, --user` - 作成者でフィルタリング
- `-q, --query` - 検索ワードでフィルタリング
- `-t, --tag` - タグでフィルタリング
- `-o, --to` - 移動先のカテゴリ（必須）
- `-m, --message` - 移動メッセージ
- `-f, --force` - 確認なしで実行

## 設定ファイル

設定ファイルは `~/.esa-cli-config.json` に保存されます。

### 設定項目

```json
{
  "team_name": "your-team-name",
  "access_token": "your-token"
}
```

#### 設定項目の説明

- `team_name` - esaのチーム名（サブドメイン）
- `access_token` - esaのアクセストークン

## 環境変数

以下の環境変数を使用できます：

- `ESA_TEAM` - チーム名
- `ESA_TOKEN` - アクセストークン

## エラーコード

- `E001` - 設定ファイルが見つかりません
- `E002` - アクセストークンが無効です
- `E003` - 記事が見つかりません
- `E004` - ファイルの形式が不正です
- `E005` - ネットワークエラー 